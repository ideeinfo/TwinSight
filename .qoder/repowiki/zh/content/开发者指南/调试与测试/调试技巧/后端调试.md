# åç«¯è°ƒè¯•

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [add_debug_logging.cjs](file://server/scripts/add_debug_logging.cjs)
- [ai-analysis.js](file://server/routes/ai-analysis.js)
- [error-handler.js](file://server/middleware/error-handler.js)
- [config/index.js](file://server/config/index.js)
- [document-sync-service.js](file://server/services/document-sync-service.js)
- [openwebui-service.js](file://server/services/openwebui-service.js)
- [.env](file://.env)
- [server/.env](file://server/.env)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [å…³é”®è·¯ç”±è°ƒè¯•æ—¥å¿—æ³¨å…¥](#å…³é”®è·¯ç”±è°ƒè¯•æ—¥å¿—æ³¨å…¥)
3. [å¤šç¯å¢ƒæ—¥å¿—çº§åˆ«é…ç½®](#å¤šç¯å¢ƒæ—¥å¿—çº§åˆ«é…ç½®)
4. [å…¨å±€é”™è¯¯å¤„ç†æœºåˆ¶](#å…¨å±€é”™è¯¯å¤„ç†æœºåˆ¶)
5. [æœåŠ¡å±‚æ•°æ®æµè¿½è¸ª](#æœåŠ¡å±‚æ•°æ®æµè¿½è¸ª)
6. [å®é™…è°ƒè¯•åœºæ™¯ç¤ºä¾‹](#å®é™…è°ƒè¯•åœºæ™¯ç¤ºä¾‹)

## ç®€ä»‹
æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†TwinSightåç«¯çš„è°ƒè¯•æ–¹æ³•ï¼Œæ¶µç›–äº†æ—¥å¿—æ³¨å…¥ã€æ—¥å¿—çº§åˆ«æ§åˆ¶ã€é”™è¯¯å¤„ç†ã€æ•°æ®æµè¿½è¸ªç­‰æ ¸å¿ƒè°ƒè¯•æŠ€æœ¯ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥æœ‰æ•ˆåœ°æ’æŸ¥å’Œè§£å†³åç«¯æœåŠ¡ä¸­çš„é—®é¢˜ï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œã€‚

## å…³é”®è·¯ç”±è°ƒè¯•æ—¥å¿—æ³¨å…¥

ä¸ºäº†æ·±å…¥ç†è§£AIåˆ†ææµç¨‹ä¸­Open WebUIè¿”å›çš„åŸå§‹æ•°æ®ç»“æ„ï¼Œé¡¹ç›®æä¾›äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬`add_debug_logging.cjs`ï¼Œè¯¥è„šæœ¬èƒ½å¤Ÿå‘`ai-analysis.js`ç­‰å…³é”®è·¯ç”±æ–‡ä»¶ä¸­æ³¨å…¥ç»“æ„åŒ–çš„`console.log`è°ƒè¯•ä»£ç ã€‚

è¯¥è„šæœ¬é€šè¿‡è¯»å–`ai-analysis.js`æ–‡ä»¶å†…å®¹ï¼Œå®šä½åˆ°`const metadataList = ragResult.sources[0].metadata;`è¿™ä¸€è¡Œï¼Œå¹¶åœ¨å…¶ä¹‹å‰æ’å…¥è¯¦ç»†çš„è°ƒè¯•è¾“å‡ºä»£ç ã€‚æ³¨å…¥çš„ä»£ç ä¼šè¾“å‡º`ragResult.sources`çš„å®Œæ•´æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬å…¶ç±»å‹ã€é•¿åº¦ã€å®Œæ•´å†…å®¹ä»¥åŠå…ƒæ•°æ®ç¤ºä¾‹ï¼Œè¿™å¯¹äºç†è§£AIæ¨¡å‹çš„å“åº”æ ¼å¼å’Œæ’æŸ¥æ•°æ®å¤„ç†é—®é¢˜è‡³å…³é‡è¦ã€‚

**æ³¨å…¥çš„è°ƒè¯•ä»£ç ç¤ºä¾‹ï¼š**
```javascript
// ========== è°ƒè¯•è¾“å‡ºï¼šOpen WebUI sources åŸå§‹æ•°æ®ç»“æ„ ==========
console.log('\nğŸ” ========== Open WebUI sources åŸå§‹æ•°æ®ç»“æ„ ==========');
console.log('ğŸ“¦ ragResult.sources ç±»å‹:', typeof ragResult.sources);
console.log('ğŸ“¦ ragResult.sources é•¿åº¦:', ragResult.sources.length);
console.log('ğŸ“¦ ragResult.sources å®Œæ•´å†…å®¹:');
console.log(JSON.stringify(ragResult.sources, null, 2));
if (ragResult.sources[0]) {
    console.log('ğŸ“¦ ragResult.sources[0] çš„æ‰€æœ‰é”®:', Object.keys(ragResult.sources[0]));
    if (ragResult.sources[0].metadata && ragResult.sources[0].metadata[0]) {
        console.log('ğŸ“¦ metadata[0] ç¤ºä¾‹:', JSON.stringify(ragResult.sources[0].metadata[0], null, 2));
    }
}
console.log('ğŸ” ========== End of sources debug ==========\\n');
// ========== è°ƒè¯•è¾“å‡ºç»“æŸ ==========
```

ä½¿ç”¨æ­¤è„šæœ¬çš„æ­¥éª¤å¦‚ä¸‹ï¼š
1.  ç¡®ä¿`server/scripts/add_debug_logging.cjs`è„šæœ¬å­˜åœ¨ã€‚
2.  åœ¨é¡¹ç›®æ ¹ç›®å½•æˆ–`server`ç›®å½•ä¸‹æ‰§è¡Œ`node scripts/add_debug_logging.cjs`ã€‚
3.  è„šæœ¬ä¼šè‡ªåŠ¨ä¿®æ”¹`server/routes/ai-analysis.js`æ–‡ä»¶ï¼Œæ³¨å…¥è°ƒè¯•ä»£ç ã€‚
4.  é‡å¯åç«¯æœåŠ¡å¹¶è§¦å‘AIåˆ†æè¯·æ±‚ï¼Œå³å¯åœ¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†çš„`sources`æ•°æ®ç»“æ„ã€‚

**é‡è¦æç¤º**ï¼šæ­¤è„šæœ¬ä¼šç›´æ¥ä¿®æ”¹æºæ–‡ä»¶ï¼Œå»ºè®®åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¹¶åœ¨è°ƒè¯•å®Œæˆåæ‰‹åŠ¨ç§»é™¤æ³¨å…¥çš„ä»£ç ï¼Œæˆ–ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè¿›è¡Œç®¡ç†ã€‚

**æœ¬èŠ‚æ¥æº**
- [add_debug_logging.cjs](file://server/scripts/add_debug_logging.cjs)
- [ai-analysis.js](file://server/routes/ai-analysis.js)

## å¤šç¯å¢ƒæ—¥å¿—çº§åˆ«é…ç½®

TwinSightåç«¯é€šè¿‡`.env`ç¯å¢ƒå˜é‡æ–‡ä»¶å’Œ`config/index.js`é…ç½®ç®¡ç†æ¨¡å—ï¼Œå®ç°äº†çµæ´»çš„æ—¥å¿—çº§åˆ«æ§åˆ¶ã€‚

æ ¸å¿ƒé…ç½®é¡¹æ˜¯`LOG_LEVEL`ç¯å¢ƒå˜é‡ã€‚å½“åœ¨`.env`æ–‡ä»¶ä¸­è®¾ç½®`LOG_LEVEL=debug`æ—¶ï¼Œåº”ç”¨ä¼šå¯ç”¨å…¨å±€è°ƒè¯•æ—¥å¿—è¾“å‡ºã€‚`config/index.js`æ–‡ä»¶è´Ÿè´£åŠ è½½è¿™äº›ç¯å¢ƒå˜é‡ï¼Œå¹¶å°†å…¶æš´éœ²ç»™åº”ç”¨çš„å…¶ä»–éƒ¨åˆ†ã€‚

```javascript
// server/config/index.js ç‰‡æ®µ
import dotenv from 'dotenv';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ä»é¡¹ç›®æ ¹ç›®å½•åŠ è½½ .env æ–‡ä»¶
dotenv.config({ path: path.join(__dirname, '../../.env') });

const config = {
    server: {
        env: process.env.NODE_ENV || 'development', // ç”¨äºåŒºåˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒ
    },
    // ... å…¶ä»–é…ç½®
};

export default config;
```

è¿™ç§é…ç½®æ–¹å¼æ”¯æŒå¤šç¯å¢ƒæ§åˆ¶ï¼š
- **å¼€å‘ç¯å¢ƒ**ï¼šé€šå¸¸åœ¨`.env.development`æˆ–æ ¹ç›®å½•`.env`ä¸­è®¾ç½®`LOG_LEVEL=debug`ï¼Œè¾“å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼Œä¾¿äºå¼€å‘å’Œé—®é¢˜æ’æŸ¥ã€‚
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šåœ¨`.env.production`ä¸­ä¸è®¾ç½®æˆ–è®¾ç½®ä¸º`LOG_LEVEL=info`ï¼Œä»¥å‡å°‘æ—¥å¿—è¾“å‡ºï¼Œé¿å…æ€§èƒ½å¼€é”€å’Œæ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚

`config/index.js`ä½œä¸ºé…ç½®ä¸­å¿ƒï¼Œç¡®ä¿äº†æ‰€æœ‰æ¨¡å—éƒ½èƒ½é€šè¿‡ç»Ÿä¸€çš„æ¥å£è®¿é—®é…ç½®ï¼Œé¿å…äº†ç¯å¢ƒå˜é‡çš„ç¡¬ç¼–ç ï¼Œæé«˜äº†é…ç½®çš„å¯ç»´æŠ¤æ€§å’Œå®‰å…¨æ€§ã€‚

**æœ¬èŠ‚æ¥æº**
- [.env](file://.env)
- [server/.env](file://server/.env)
- [config/index.js](file://server/config/index.js)

## å…¨å±€é”™è¯¯å¤„ç†æœºåˆ¶

åç«¯çš„å…¨å±€é”™è¯¯å¤„ç†ç”±`middleware/error-handler.js`æ–‡ä»¶ä¸­çš„`errorHandler`ä¸­é—´ä»¶ç»Ÿä¸€ç®¡ç†ã€‚è¯¥æœºåˆ¶ç¡®ä¿äº†æ‰€æœ‰æœªè¢«æ•è·çš„é”™è¯¯éƒ½èƒ½ä»¥ä¸€è‡´çš„JSONæ ¼å¼è¿”å›ç»™å‰ç«¯ï¼Œé¿å…äº†æœåŠ¡å™¨å†…éƒ¨é”™è¯¯å¯¼è‡´çš„å´©æºƒã€‚

### è‡ªå®šä¹‰é”™è¯¯ç±» `ApiError`
é¡¹ç›®å®šä¹‰äº†ä¸€ä¸ª`ApiError`ç±»ï¼Œç”¨äºåˆ›å»ºç»“æ„åŒ–çš„APIé”™è¯¯ã€‚å®ƒç»§æ‰¿è‡ªJavaScriptçš„`Error`ç±»ï¼Œå¹¶å¢åŠ äº†`statusCode`å’Œ`details`å±æ€§ï¼Œä½¿å¾—é”™è¯¯ä¿¡æ¯æ›´åŠ æ˜ç¡®ã€‚

```javascript
export class ApiError extends Error {
    constructor(statusCode, message, details = null) {
        super(message);
        this.statusCode = statusCode;
        this.details = details;
        this.name = 'ApiError';
    }

    // é™æ€æ–¹æ³•ï¼Œç”¨äºå¿«é€Ÿåˆ›å»ºå¸¸è§é”™è¯¯
    static badRequest(message, details = null) {
        return new ApiError(400, message, details);
    }
    static unauthorized(message = 'æœªæˆæƒ') {
        return new ApiError(401, message);
    }
    // ... å…¶ä»–é™æ€æ–¹æ³•
}
```

### ç‰¹å®šæ•°æ®åº“é”™è¯¯å¤„ç†
`errorHandler`ä¸­é—´ä»¶èƒ½å¤Ÿè¯†åˆ«ç‰¹å®šçš„PostgreSQLé”™è¯¯ç ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæ›´å‹å¥½çš„ç”¨æˆ·æç¤ºï¼š
- **å”¯ä¸€çº¦æŸé”™è¯¯ (23505)**ï¼šå½“å°è¯•æ’å…¥é‡å¤æ•°æ®æ—¶ï¼Œæ•è·`err.code === '23505'`ï¼Œè¿”å›`409 Conflict`çŠ¶æ€ç å’Œâ€œæ•°æ®å·²å­˜åœ¨â€çš„é”™è¯¯ä¿¡æ¯ã€‚
- **å¤–é”®çº¦æŸé”™è¯¯ (23503)**ï¼šå½“å¼•ç”¨çš„å…³è”æ•°æ®ä¸å­˜åœ¨æ—¶ï¼Œæ•è·`err.code === '23503'`ï¼Œè¿”å›`400 Bad Request`çŠ¶æ€ç å’Œâ€œå…³è”æ•°æ®ä¸å­˜åœ¨â€çš„é”™è¯¯ä¿¡æ¯ã€‚

### å¼€å‘ä¸ç”Ÿäº§æ¨¡å¼çš„å·®å¼‚
è¯¥ä¸­é—´ä»¶æ ¹æ®è¿è¡Œç¯å¢ƒï¼ˆé€šè¿‡`config.server.env`åˆ¤æ–­ï¼‰è¿”å›ä¸åŒçš„é”™è¯¯ä¿¡æ¯ï¼š
- **å¼€å‘æ¨¡å¼**ï¼šè¿”å›å®Œæ•´çš„é”™è¯¯å †æ ˆï¼ˆ`err.stack`ï¼‰ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½é—®é¢˜æ ¹æºã€‚
- **ç”Ÿäº§æ¨¡å¼**ï¼šä»…è¿”å›é€šç”¨çš„â€œæœåŠ¡å™¨å†…éƒ¨é”™è¯¯â€ä¿¡æ¯ï¼Œéšè—å…·ä½“çš„é”™è¯¯ç»†èŠ‚ï¼Œé˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚

```javascript
// server/middleware/error-handler.js ç‰‡æ®µ
export const errorHandler = (err, req, res, next) => {
    console.error('âŒ é”™è¯¯:', err); // å§‹ç»ˆè®°å½•é”™è¯¯æ—¥å¿—

    // å·²çŸ¥çš„ API é”™è¯¯
    if (err instanceof ApiError) {
        return res.status(err.statusCode).json({ success: false, error: err.message, details: err.details });
    }

    // æ•°æ®åº“å”¯ä¸€çº¦æŸé”™è¯¯
    if (err.code === '23505') {
        return res.status(409).json({ success: false, error: 'æ•°æ®å·²å­˜åœ¨', details: err.detail });
    }

    // ç”Ÿäº§æ¨¡å¼éšè—é”™è¯¯è¯¦æƒ…
    if (config.server.env === 'development') {
        return res.status(500).json({ success: false, error: err.message, stack: err.stack });
    }
    res.status(500).json({ success: false, error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯' });
};
```

**æœ¬èŠ‚æ¥æº**
- [error-handler.js](file://server/middleware/error-handler.js)
- [config/index.js](file://server/config/index.js)

## æœåŠ¡å±‚æ•°æ®æµè¿½è¸ª

åœ¨æœåŠ¡å±‚ï¼ˆå¦‚`document-sync-service.js`ï¼‰ä¸­æ·»åŠ ä¸´æ—¶æ—¥å¿—æ˜¯è¿½è¸ªæ•°æ®æµå’Œæ’æŸ¥å¤æ‚ä¸šåŠ¡é€»è¾‘é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚

ä»¥`document-sync-service.js`ä¸ºä¾‹ï¼Œè¯¥æœåŠ¡è´Ÿè´£å°†æ–‡æ¡£è‡ªåŠ¨åŒæ­¥åˆ°Open WebUIçŸ¥è¯†åº“ã€‚é€šè¿‡åœ¨å…³é”®å‡½æ•°ä¸­æ·»åŠ `console.log`è¯­å¥ï¼Œå¯ä»¥æ¸…æ™°åœ°è§‚å¯Ÿåˆ°æ•°æ®çš„å¤„ç†æµç¨‹ã€‚

```javascript
// server/services/document-sync-service.js ç‰‡æ®µ
async function runBatchSync() {
    if (isSyncing) {
        console.log('â³ åŒæ­¥ä»»åŠ¡æ­£åœ¨è¿›è¡Œä¸­ï¼Œè·³è¿‡æœ¬æ¬¡æ‰§è¡Œ'); // è¿½è¸ªä»»åŠ¡çŠ¶æ€
        return { synced: 0, failed: 0, skipped: 0 };
    }

    console.log('ğŸ” æ£€æŸ¥ Open WebUI æœåŠ¡...'); // è¿½è¸ªæœåŠ¡å¥åº·æ£€æŸ¥
    const isHealthy = await openwebuiService.checkHealth();
    if (!isHealthy) {
        console.log('âš ï¸ Open WebUI æœåŠ¡ä¸å¯ç”¨ï¼Œè·³è¿‡åŒæ­¥');
        return stats;
    }
    console.log('âœ… Open WebUI æœåŠ¡æ­£å¸¸');

    console.log('ğŸ” æŸ¥è¯¢æœªåŒæ­¥çš„æ–‡æ¡£...'); // è¿½è¸ªæ•°æ®åº“æŸ¥è¯¢
    const documents = await getUnsyncedDocuments();
    console.log(`ğŸ“‹ æ‰¾åˆ° ${documents.length} ä¸ªæœªåŒæ­¥çš„æ–‡æ¡£`);

    // ... å¤„ç†æ–‡æ¡£
    for (const doc of documents) {
        const kbId = await findKnowledgeBaseId(doc);
        if (!kbId) {
            stats.skipped++;
            continue;
        }

        const success = await syncDocument(doc, kbId); // è¿½è¸ªå•ä¸ªæ–‡æ¡£åŒæ­¥
        if (success) {
            stats.synced++;
        } else {
            stats.failed++;
        }
    }

    console.log(`ğŸ“Š åŒæ­¥å®Œæˆ: æˆåŠŸ=${stats.synced}, å¤±è´¥=${stats.failed}, è·³è¿‡=${stats.skipped}`); // è¿½è¸ªæœ€ç»ˆç»Ÿè®¡
    return stats;
}
```

è¿™äº›æ—¥å¿—æä¾›äº†ä»ä»»åŠ¡å¯åŠ¨ã€æœåŠ¡æ£€æŸ¥ã€æ•°æ®æŸ¥è¯¢åˆ°æ–‡æ¡£å¤„ç†çš„å®Œæ•´æ‰§è¡Œè§†å›¾ï¼Œæ˜¯è¯Šæ–­â€œæ–‡æ¡£åŒæ­¥å¤±è´¥â€ç­‰é—®é¢˜çš„å®è´µä¿¡æ¯ã€‚

**æœ¬èŠ‚æ¥æº**
- [document-sync-service.js](file://server/services/document-sync-service.js)

## å®é™…è°ƒè¯•åœºæ™¯ç¤ºä¾‹

### æ’æŸ¥æ–‡æ¡£åŒæ­¥å¤±è´¥é—®é¢˜

å‡è®¾ç”¨æˆ·æŠ¥å‘ŠæŸäº›æ–‡æ¡£æœªèƒ½æˆåŠŸåŒæ­¥åˆ°çŸ¥è¯†åº“ã€‚å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œè°ƒè¯•ï¼š

1.  **æ£€æŸ¥æœåŠ¡æ—¥å¿—**ï¼šé¦–å…ˆæŸ¥çœ‹`document-sync-service.js`ä¸­çš„æ—¥å¿—è¾“å‡ºã€‚å¦‚æœçœ‹åˆ°`âš ï¸ Open WebUI æœåŠ¡ä¸å¯ç”¨ï¼Œè·³è¿‡åŒæ­¥`ï¼Œåˆ™é—®é¢˜å‡ºåœ¨Open WebUIæœåŠ¡æœ¬èº«ï¼Œéœ€è¦æ£€æŸ¥å…¶è¿è¡ŒçŠ¶æ€å’Œç½‘ç»œè¿æ¥ã€‚

2.  **å¯ç”¨è¯¦ç»†æ—¥å¿—**ï¼šåœ¨`.env`æ–‡ä»¶ä¸­è®¾ç½®`LOG_LEVEL=debug`ï¼Œé‡å¯æœåŠ¡ã€‚è¿™å¯èƒ½ä¼šåœ¨`openwebui-service.js`ä¸­äº§ç”Ÿæ›´è¯¦ç»†çš„è¯·æ±‚å’Œå“åº”æ—¥å¿—ï¼Œå¸®åŠ©å®šä½APIè°ƒç”¨å¤±è´¥çš„å…·ä½“åŸå› ï¼ˆå¦‚è®¤è¯å¤±è´¥ã€æ–‡ä»¶ä¸Šä¼ é”™è¯¯ç­‰ï¼‰ã€‚

3.  **æ³¨å…¥ç»“æ„åŒ–è°ƒè¯•**ï¼šå¦‚æœé—®é¢˜ä¸AIåˆ†æç»“æœç›¸å…³ï¼Œè¿è¡Œ`add_debug_logging.cjs`è„šæœ¬ï¼Œåœ¨`ai-analysis.js`ä¸­æ³¨å…¥è°ƒè¯•ä»£ç ã€‚ç„¶åè§¦å‘ä¸€æ¬¡AIåˆ†æï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºçš„`ragResult.sources`åŸå§‹æ•°æ®ï¼Œç¡®è®¤æ•°æ®æ˜¯å¦æŒ‰é¢„æœŸè¿”å›ã€‚

4.  **æ£€æŸ¥é”™è¯¯å¤„ç†**ï¼šå¦‚æœåŒæ­¥è¿‡ç¨‹ä¸­å‡ºç°æ•°æ®åº“é”™è¯¯ï¼Œ`error-handler.js`ä¼šæ•è·å¹¶è®°å½•ã€‚æ£€æŸ¥æ—¥å¿—ä¸­æ˜¯å¦æœ‰`23505`æˆ–`23503`ç­‰é”™è¯¯ç ï¼Œè¿™æœ‰åŠ©äºåˆ¤æ–­æ˜¯æ•°æ®å†²çªè¿˜æ˜¯å…³è”æ•°æ®ç¼ºå¤±ã€‚

5.  **ä¸´æ—¶æ·»åŠ è¿½è¸ªæ—¥å¿—**ï¼šå¦‚æœä¸Šè¿°æ–¹æ³•ä»æ— æ³•å®šä½ï¼Œå¯ä»¥åœ¨`document-sync-service.js`çš„`syncDocument`å‡½æ•°ä¸­æ·»åŠ ä¸´æ—¶çš„`console.log(doc)`ï¼Œæ‰“å°å‡ºå¾…åŒæ­¥æ–‡æ¡£çš„å®Œæ•´ä¿¡æ¯ï¼Œç¡®è®¤`file_path`ã€`file_name`ç­‰å­—æ®µæ˜¯å¦æ­£ç¡®ã€‚

é€šè¿‡ç»“åˆæ—¥å¿—çº§åˆ«æ§åˆ¶ã€ç»“æ„åŒ–è°ƒè¯•æ³¨å…¥å’ŒæœåŠ¡å±‚è¿½è¸ªï¼Œå¯ä»¥ç³»ç»Ÿæ€§åœ°æ’æŸ¥å’Œè§£å†³æ­¤ç±»é—®é¢˜ã€‚

**æœ¬èŠ‚æ¥æº**
- [document-sync-service.js](file://server/services/document-sync-service.js)
- [openwebui-service.js](file://server/services/openwebui-service.js)
- [ai-analysis.js](file://server/routes/ai-analysis.js)
- [error-handler.js](file://server/middleware/error-handler.js)