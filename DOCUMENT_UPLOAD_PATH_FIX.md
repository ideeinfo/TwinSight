# 文档上传路径修复

## ✅ 已修复的问题

### 1. 存储路径更改
- **之前**: `public/documents/`
- **现在**: `public/docs/`

### 2. 文件名唯一编码
**新格式**: `{timestamp}_{random}.{ext}`
- `timestamp`: 13位时间戳
- `random`: 13位随机字符串
- `ext`: 原文件扩展名

**示例**: `1703123456789_a1b2c3d4e5f6g.pdf`

### 3. 静态文件访问
- **URL**: `/docs/{filename}`
- **示例**: `http://localhost:3001/docs/1703123456789_a1b2c3d4e5f6g.pdf`

## 📝 修改的文件

1. **server/routes/documents.js**
   - 第16行: 存储目录改为 `public/docs`
   - 第25-29行: 文件名简化为纯时间戳+随机字符串
   - 第89行: 文件路径改为 `/docs/...`

2. **server/index.js**
   - 第27行: 静态文件服务改为 `/docs`

## 🔧 需要重启服务器

由于修改了路由配置，需要重启后端服务器：

```bash
# 在服务器终端按 Ctrl+C 停止
# 然后重新启动
npm run dev
```

或者如果使用nodemon会自动重启。

## ✅ 测试步骤

1. 重启服务器
2. 刷新浏览器页面
3. 选择一个资产或房间
4. 点击"上传文档"
5. 选择文件上传
6. 应该成功了！

## 📂 文件存储示例

```
public/
  └── docs/
      ├── 1703123456789_a1b2c3d4e5f6g.pdf
      ├── 1703123457890_h7i8j9k0l1m2n.jpg
      └── 1703123458901_o3p4q5r6s7t8u.mp4
```

## ⚠️ 注意

如果之前有上传的文件在 `public/documents/` 目录，它们不会自动迁移。需要手动移动或重新上传。
