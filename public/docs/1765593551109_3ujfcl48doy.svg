<svg width="1200" height="850" xmlns="http://www.w3.org/2000/svg">
  <!-- 样式定义 -->
  <style>
    .source-box { fill: #eeeeee; stroke: #666; stroke-width: 2px; rx: 5; ry: 5; }
    .fault-box { fill: #ffebee; stroke: #d32f2f; stroke-width: 4px; rx: 5; ry: 5; filter: drop-shadow(0px 0px 5px rgba(211, 47, 47, 0.5)); }
    .affected-group { fill: #fff; stroke: #d32f2f; stroke-width: 2px; rx: 8; ry: 8; stroke-dasharray: 5,5; }
    .affected-node { fill: #fff0f0; stroke: #d32f2f; stroke-width: 2px; rx: 4; ry: 4; }
    .switch-node { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2px; rx: 4; ry: 4; } /* 双电源设备 */
    
    .line { stroke: #d32f2f; stroke-width: 2px; fill: none; }
    .gray-line { stroke: #999; stroke-width: 2px; fill: none; }
    
    .title { font-size: 24px; font-weight: bold; font-family: "Microsoft YaHei", sans-serif; text-anchor: middle; fill: #d32f2f; }
    .label-bold { font-size: 14px; font-weight: bold; font-family: "Microsoft YaHei", sans-serif; text-anchor: middle; fill: #333; }
    .label { font-size: 12px; font-family: "Microsoft YaHei", sans-serif; text-anchor: middle; fill: #333; }
    .code { font-size: 10px; font-family: "Consolas", monospace; text-anchor: middle; fill: #666; }
    .status { font-size: 12px; font-weight: bold; fill: #d32f2f; text-anchor: middle; }
  </style>

  <!-- 标题 -->
  <text x="600" y="40" class="title">变压器 ZB1 停电检修影响范围图</text>
  <text x="600" y="65" class="label" style="fill:#666;">红框 = 停电/受影响设备 | 蓝框 = 双电源切换(失去主供)</text>

  <!-- 根节点：高压侧 (未受影响，灰色) -->
  <rect x="520" y="80" width="160" height="50" class="source-box" />
  <text x="600" y="100" class="label-bold">1# 高压柜 (AH1-AH6)</text>
  <text x="600" y="115" class="code">===DY1.AH1...</text>
  
  <line x1="600" y1="130" x2="600" y2="160" class="gray-line" />

  <!-- 故障/检修节点：变压器 ZB1 -->
  <rect x="500" y="160" width="200" height="70" class="fault-box" />
  <text x="600" y="190" class="label-bold" style="font-size:16px;">1# 变压器 (ZB1)</text>
  <text x="600" y="210" class="status">!!! 停电检修 !!!</text>

  <line x1="600" y1="230" x2="600" y2="280" class="line" />

  <!-- 一级配电：0.4KV 母线 -->
  <rect x="450" y="280" width="300" height="60" class="affected-node" style="fill:#ffcdd2;"/>
  <text x="600" y="305" class="label-bold">0.4KV I段母线 (C1DP1)</text>
  <text x="600" y="325" class="code">===DY1...ZB1.C1DP1</text>

  <!-- 母线分出的连接线 -->
  <line x1="600" y1="340" x2="600" y2="380" class="line" /> <!-- 中间干线 -->
  <line x1="200" y1="380" x2="1000" y2="380" class="line" /> <!-- 横向干线 -->
  
  <!-- 分支1: 动力泵组 (DP4O, DP5O, DP6O) -->
  <line x1="200" y1="380" x2="200" y2="420" class="line" />
  <g transform="translate(50, 420)">
    <rect x="0" y="0" width="300" height="350" class="affected-group" />
    <text x="150" y="25" class="label-bold" style="fill:#d32f2f;">核心动力: 雨水泵组</text>
    
    <!-- RQ1 / GK1 -->
    <rect x="20" y="50" width="260" height="80" class="affected-node" />
    <text x="150" y="75" class="label-bold">回路 DP4O -> 软启柜 RQ1</text>
    <text x="150" y="95" class="label">负载: 雨水泵 GK1-1</text>
    <text x="150" y="110" class="label">负载: 1# 水泵电机</text>

    <!-- RQ2 / GK2 -->
    <rect x="20" y="140" width="260" height="80" class="affected-node" />
    <text x="150" y="165" class="label-bold">回路 DP5O -> 软启柜 RQ2</text>
    <text x="150" y="185" class="label">负载: 雨水泵 GK2-1</text>
    <text x="150" y="200" class="label">负载: 2# 水泵电机</text>

    <!-- RQ3 / GK3 -->
    <rect x="20" y="230" width="260" height="80" class="affected-node" />
    <text x="150" y="255" class="label-bold">回路 DP6O -> 软启柜 RQ3</text>
    <text x="150" y="275" class="label">负载: 雨水泵 GK3-1</text>
    <text x="150" y="290" class="label">负载: 3# 水泵电机</text>
  </g>

  <!-- 分支2: 照明与插座 (DP3O) -->
  <line x1="600" y1="380" x2="600" y2="420" class="line" />
  <g transform="translate(400, 420)">
    <rect x="0" y="0" width="400" height="400" class="affected-group" />
    <text x="200" y="25" class="label-bold" style="fill:#d32f2f;">照明/插座/通风 (回路 DP3O)</text>
    
    <!-- MX1 -->
    <rect x="20" y="50" width="170" height="100" class="affected-node" />
    <text x="105" y="75" class="label-bold">照明配电箱 MX1</text>
    <text x="105" y="95" class="label">门厅/走道/泵房照明</text>
    <text x="105" y="115" class="label">控制室照明</text>
    <text x="105" y="135" class="label">各类平板灯/壁灯</text>

    <!-- SMX1 (双电源) -->
    <rect x="210" y="50" width="170" height="100" class="switch-node" />
    <text x="295" y="75" class="label-bold">双电源箱 SMX1</text>
    <text x="295" y="95" class="label">应急疏散指示灯</text>
    <text x="295" y="115" class="label">重要区域照明</text>
    <text x="295" y="135" class="status" style="font-size:10px;">(ZB1进线失电，切至备用)</text>

    <!-- 插座 -->
    <rect x="20" y="160" width="360" height="60" class="affected-node" />
    <text x="200" y="185" class="label-bold">插座系统</text>
    <text x="200" y="205" class="label">控制室插座 | 空调插座 | 检修插座 | 热水器</text>

    <!-- 通风 -->
    <rect x="20" y="230" width="360" height="80" class="affected-node" />
    <text x="200" y="255" class="label-bold">通风系统 (F系列/K系列)</text>
    <text x="200" y="275" class="label">管理房风机 1-6</text>
    <text x="200" y="295" class="label">泵房风机 K4-1~4, K5-2~4</text>
    
    <!-- 弱电/消防 -->
    <rect x="20" y="320" width="360" height="60" class="affected-node" />
    <text x="200" y="345" class="label-bold">安防与弱电电源</text>
    <text x="200" y="365" class="label">CCTV摄像机 | 火灾探测器 | 报警器 (若无UPS则断电)</text>
  </g>

  <!-- 分支3: 室外照明/其他 -->
  <line x1="1000" y1="380" x2="1000" y2="420" class="line" />
  <g transform="translate(850, 420)">
    <rect x="0" y="0" width="300" height="150" class="affected-group" />
    <text x="150" y="25" class="label-bold" style="fill:#d32f2f;">室外/辅助 (DP3O/DP7)</text>
    
    <rect x="20" y="50" width="260" height="80" class="affected-node" />
    <text x="150" y="75" class="label-bold">室外照明配电箱 WMX</text>
    <text x="150" y="95" class="label">路灯 / 庭院灯</text>
    <text x="150" y="115" class="label">雨棚照明</text>
  </g>

</svg>