[
    {
        "id": "tandem-demo-flow",
        "type": "tab",
        "label": "Tandem æ¸©åº¦æ¨¡æ‹Ÿ",
        "disabled": false,
        "info": "æ¨¡æ‹Ÿæ¸©åº¦æ•°æ®å¹¶å†™å…¥ InfluxDB"
    },
    {
        "id": "inject-timer",
        "type": "inject",
        "z": "tandem-demo-flow",
        "name": "æ¯5ç§’è§¦å‘",
        "props": [],
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "x": 130,
        "y": 100,
        "wires": [
            [
                "generate-rooms"
            ]
        ]
    },
    {
        "id": "generate-rooms",
        "type": "function",
        "z": "tandem-demo-flow",
        "name": "ç”Ÿæˆæˆ¿é—´æ•°æ®",
        "func": "// æ¨¡æ‹Ÿæˆ¿é—´åˆ—è¡¨\nconst rooms = [\n    { code: 'Room-101', name: 'ä¼šè®®å®¤A' },\n    { code: 'Room-102', name: 'åŠå…¬åŒºB' },\n    { code: 'Room-103', name: 'ä¼‘æ¯å®¤C' },\n    { code: 'Room-201', name: 'å®éªŒå®¤D' }\n];\n\n// ä¸ºæ¯ä¸ªæˆ¿é—´ç”Ÿæˆæ¶ˆæ¯\nconst messages = rooms.map(room => {\n    // ç”Ÿæˆ 20-35 èŒƒå›´å†…çš„éšæœºæ¸©åº¦\n    const baseTemp = 25 + Math.sin(Date.now() / 60000) * 5;\n    const temp = baseTemp + (Math.random() - 0.5) * 4;\n    \n    return {\n        payload: {\n            code: room.code,\n            name: room.name,\n            value: Math.round(temp * 10) / 10,\n            timestamp: Date.now()\n        }\n    };\n});\n\nreturn [messages];",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 100,
        "wires": [
            [
                "format-influx"
            ]
        ]
    },
    {
        "id": "format-influx",
        "type": "function",
        "z": "tandem-demo-flow",
        "name": "æ ¼å¼åŒ– InfluxDB",
        "func": "// è½¬æ¢ä¸º InfluxDB æ ¼å¼\nmsg.payload = {\n    measurement: 'room_temp',\n    tags: {\n        code: msg.payload.code,\n        name: msg.payload.name\n    },\n    fields: {\n        value: msg.payload.value\n    },\n    timestamp: msg.payload.timestamp * 1000000  // çº³ç§’\n};\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 100,
        "wires": [
            [
                "influx-out",
                "debug"
            ]
        ]
    },
    {
        "id": "influx-out",
        "type": "influxdb out",
        "z": "tandem-demo-flow",
        "influxdb": "influx-config",
        "name": "å†™å…¥ InfluxDB",
        "measurement": "",
        "precision": "",
        "retentionPolicy": "",
        "database": "",
        "precisionV18FluxV20": "ms",
        "retentionPolicyV18Flux": "",
        "org": "demo",
        "bucket": "tandem",
        "x": 740,
        "y": 100,
        "wires": []
    },
    {
        "id": "debug",
        "type": "debug",
        "z": "tandem-demo-flow",
        "name": "è°ƒè¯•è¾“å‡º",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 160,
        "wires": []
    },
    {
        "id": "influx-config",
        "type": "influxdb",
        "hostname": "influxdb",
        "port": "8086",
        "protocol": "http",
        "database": "",
        "name": "Tandem InfluxDB",
        "usetls": false,
        "tls": "",
        "influxdbVersion": "2.0",
        "url": "http://influxdb:8086",
        "timeout": "",
        "rejectUnauthorized": true
    },
    {
        "id": "comment-1",
        "type": "comment",
        "z": "tandem-demo-flow",
        "name": "ğŸ“ ä½¿ç”¨è¯´æ˜",
        "info": "## Tandem æ¸©åº¦æ•°æ®æ¨¡æ‹Ÿæµç¨‹\n\n### åŠŸèƒ½\n- æ¯5ç§’ç”Ÿæˆæ¨¡æ‹Ÿæ¸©åº¦æ•°æ®\n- æ¨¡æ‹Ÿ4ä¸ªæˆ¿é—´çš„æ¸©åº¦ä¼ æ„Ÿå™¨\n- æ¸©åº¦èŒƒå›´ï¼š20-35Â°C\n- æ•°æ®å†™å…¥ InfluxDB\n\n### é…ç½® InfluxDB è¿æ¥\n1. åŒå‡» \"å†™å…¥ InfluxDB\" èŠ‚ç‚¹\n2. ç‚¹å‡» Server æ—è¾¹çš„ç¼–è¾‘æŒ‰é’®\n3. é…ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š\n   - URL: http://influxdb:8086\n   - Token: tandem-influx-token-2024\n   - Organization: demo\n   - Bucket: tandem\n\n### éªŒè¯æ•°æ®\n1. è®¿é—® http://localhost:8086\n2. ä½¿ç”¨ admin/adminpassword ç™»å½•\n3. è¿›å…¥ Data Explorer æŸ¥çœ‹æ•°æ®",
        "x": 110,
        "y": 40,
        "wires": []
    }
]